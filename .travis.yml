dist: bionic

sudo: required

notifications:
  email: false

language: go

go:
  - "1.12"
  - "1.13"

services:
  - docker

env:
  global:
  - GOARCH=amd64
  - TEST_HOST=127.0.0.1

before_install:
  - sudo service mysql stop
  - sudo service postgresql stop
  - sleep 10

install:
  - mkdir -p $GOPATH/src/upper.io
  - mv $PWD $GOPATH/src/upper.io/bond
  - cd $GOPATH/src/upper.io/bond
  - go get -v -t -d ./...
  - export TRAVIS_BUILD_DIR=$GOPATH/src/upper.io/bond

script:
  - make -C internal/tests server-up test server-down

